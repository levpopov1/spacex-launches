(this["webpackJsonpspacex-launches"]=this["webpackJsonpspacex-launches"]||[]).push([[0],{40:function(e,t,r){},43:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(12),s=r.n(c),i=(r(17),r(39),r(40),r(3)),o=r.n(i),u=r(4),l=r(7),d=r(2);var j=r(0);var b=function(e){var t=e.launch,r=Object(n.useState)(""),a=Object(d.a)(r,2),c=a[0],s=a[1];return Object(n.useEffect)((function(){var e=new Date(t.date_utc),r=e.getDate(),n=r+function(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(r)+" "+e.toLocaleDateString("default",{month:"short",year:"numeric"});s(n)}),[t]),Object(j.jsx)("div",{className:"launch card mb-3",children:Object(j.jsxs)("div",{className:"card-body d-flex flex-row justify-content-between",children:[Object(j.jsxs)("div",{className:"launch-name d-flex flex-row",children:[Object(j.jsxs)("h1",{className:"card-title mb-0",children:["#",t.flight_number]}),Object(j.jsx)("h1",{className:"card-title ms-5 mb-0",children:t.name})]}),Object(j.jsxs)("div",{className:"launch-info text-end",children:[Object(j.jsx)("p",{className:"text mb-0",children:c}),Object(j.jsx)("h4",{className:"card-title mb-0",children:t.rocket.name})]})]})})};var h=function(e){var t=e.launches;return Object(j.jsx)("div",{className:"launches",children:t.map((function(e){return Object(j.jsx)(b,{launch:e},e.id)}))})};var m=function(e){var t=e.launches,r=e.setFilteredLaunches,a=Object(n.useState)([]),c=Object(d.a)(a,2),s=c[0],i=c[1];Object(n.useEffect)((function(){var e=o(t);return i(e),function(){i([])}}),[t]);var o=function(e){return Object(l.a)(new Set(e.map((function(e){return new Date(e.date_utc).getFullYear()}))))};return Object(j.jsxs)("div",{className:"dropdown",children:[Object(j.jsx)("button",{className:"btn btn-primary dropdown-toggle",type:"button",id:"dropdownFilterByYear","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Filter By Year"}),Object(j.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownFilterByYear",children:[Object(j.jsx)("li",{children:Object(j.jsx)("button",{className:"dropdown-item",onClick:function(){return r({type:"reset",payload:t})},children:"All Years"})}),s.map((function(e){return Object(j.jsx)("li",{children:Object(j.jsx)("button",{className:"dropdown-item",onClick:function(){return r({type:"filter",payload:e})},children:e})},e)}))]})]})};var p=function(e){var t=e.setFilteredLaunches,r=Object(n.useState)("descending"),a=Object(d.a)(r,2),c=a[0],s=a[1];return Object(j.jsxs)("button",{className:"btn btn-primary ms-2",onClick:function(){return t({type:"sort",payload:{order:c,target:"date_unix"}}),void s("descending"===c?"ascending":"descending")},children:["Sort ",c,Object(j.jsx)("img",{src:"icon/sort.png",alt:"Sort icon",className:"btn-icon"})]})};var f=function(e){var t=e.launches,r=e.setFilteredLaunches;return Object(j.jsx)("div",{className:"row mb-3",children:Object(j.jsxs)("div",{className:"col-sm-12 d-flex justify-content-end",children:[Object(j.jsx)(m,{launches:t,setFilteredLaunches:r}),Object(j.jsx)(p,{setFilteredLaunches:r})]})})};function x(e){return O.apply(this,arguments)}function O(){return(O=Object(u.a)(o.a.mark((function e(t){var r,n,a,c,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},n="https://api.spacexdata.com/v4",0===Object.keys(r).length&&(r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:{},options:{select:{name:1,rocket:1,date_utc:1,date_unix:1,flight_number:1},pagination:!1,populate:[{path:"rocket",select:{name:1}}]}})}),e.prev=3,e.next=6,fetch(n+t,r);case 6:if((a=e.sent).ok){e.next=9;break}throw new Error("HTTP error! status: ".concat(a.status));case 9:return e.next=11,a.json();case 11:return c=e.sent,e.abrupt("return",{error:null,data:c.docs});case 15:return e.prev=15,e.t0=e.catch(3),e.abrupt("return",{error:!0,message:e.t0.message,data:null});case 18:case"end":return e.stop()}}),e,null,[[3,15]])})))).apply(this,arguments)}var g=function(e){var t=e.setFetchingError,r=e.setLaunches,n=e.setFilteredLaunches,a=e.setShowReloadMessage,c=function(){var e=Object(u.a)(o.a.mark((function e(){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({isError:!1}),e.next=3,x("/launches/query");case 3:if(!(c=e.sent).error){e.next=6;break}return e.abrupt("return",t({isError:!0,message:c.message}));case 6:r(c.data),n({type:"reset",payload:c.data}),a(!0),setTimeout((function(){a(!1)}),2e3);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("button",{className:"btn btn-primary",onClick:c,children:["Reload",Object(j.jsx)("img",{src:"icon/refresh.png",alt:"Sort icon",className:"btn-icon"})]})};var v=function(e){var t=e.setFetchingError,r=e.setLaunches,a=e.setFilteredLaunches,c=Object(n.useState)(!1),s=Object(d.a)(c,2),i=s[0],o=s[1];return Object(j.jsx)("nav",{className:"navbar navbar-light mb-3",children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsxs)("a",{className:"navbar-brand d-flex",href:"/",children:[Object(j.jsx)("img",{src:"spacex-logo.png",alt:"SpaceX Logo"}),"LAUNCHES"]}),Object(j.jsxs)("div",{className:"controls d-flex flex-row align-items-center",children:[i&&Object(j.jsx)("p",{className:"text text-success fw-bold mb-0 me-3",children:"Data Reloaded!"}),Object(j.jsx)(g,{setFetchingError:t,setLaunches:r,setFilteredLaunches:a,setShowReloadMessage:o})]})]})})};var y=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),r=t[0],a=t[1],c=Object(n.useReducer)((function(e,t){switch(t.type){case"filter":return r.filter((function(e){return new Date(e.date_utc).getFullYear()===t.payload}));case"sort":return n=Object(l.a)(e),a=t.payload.order,c=t.payload.target,n.sort((function(e,t){return"ascending"===a?e[c]-t[c]:t[c]-e[c]}));case"reset":return t.payload;default:throw new Error}var n,a,c}),r,y),s=Object(d.a)(c,2),i=s[0],b=s[1],m=Object(n.useState)({isError:!1,message:""}),p=Object(d.a)(m,2),O=p[0],g=p[1];function y(e){return e}return Object(n.useEffect)((function(){(function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g({isError:!1}),e.next=3,x("/launches/query");case 3:if(!(t=e.sent).error){e.next=6;break}return e.abrupt("return",g({isError:!0,message:t.message}));case 6:a(t.data),b({type:"reset",payload:t.data});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(v,{setFetchingError:g,setLaunches:a,setFilteredLaunches:b}),Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(f,{launches:r,setFilteredLaunches:b}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-sm-5",children:Object(j.jsx)("img",{src:"img/launch-home.png",className:"launch-img",alt:"Rocket Launch"})}),Object(j.jsx)("div",{className:"col-sm-7",children:O.isError?Object(j.jsxs)("div",{children:["An error occured: ",Object(j.jsx)("pre",{children:"fetchingError.message"})]}):Object(j.jsx)(h,{launches:i})})]})]})]})},w=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,44)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))};s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(y,{})}),document.getElementById("root")),w()}},[[43,1,2]]]);
//# sourceMappingURL=main.77477453.chunk.js.map